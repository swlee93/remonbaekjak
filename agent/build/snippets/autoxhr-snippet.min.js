(function(p){console.log("autoxhr-snippet.onload",!p.XMLHttpRequest||!(new p.XMLHttpRequest).addEventListener);if(!p.XMLHttpRequest||!(new p.XMLHttpRequest).addEventListener){return}var f=document.createElement("A"),t=p.XMLHttpRequest,d=[],c,m=["uninitialized","open","responseStart","domInteractive","responseEnd"];p.BOOMR=p.BOOMR||{};BOOMR.xhr={stop:function(e){c=e;p.XMLHttpRequest=t;delete BOOMR.xhr;setTimeout(function(){d=[]},10);return d}};var g=function(){try{if("performance"in p&&p.performance.timing){return function(){return Math.round(p.performance.now()+performance.timing.navigationStart)}}}catch(e){}return Date.now||function(){return(new Date).getTime()}}();p.XMLHttpRequest=function(){var s=new t,u=s.open;s.open=function(e,t,n){f.href=t;var r={timing:{},url:f.href,method:e};function i(){if(!r.timing.loadEventEnd){r.timing.loadEventEnd=g();if("performance"in p&&p.performance&&typeof p.performance.getEntriesByName==="function"){var e=p.performance.getEntriesByName(r.url);var t=e&&e.length&&e[e.length-1];if(t){var n=p.performance.timing.navigationStart;if(t.responseEnd!==0){r.timing.responseEnd=Math.round(n+t.responseEnd)}if(t.responseStart!==0){r.timing.responseStart=Math.round(n+t.responseStart)}if(t.startTime!==0){r.timing.requestStart=Math.round(n+t.startTime)}}}if(c){c(r)}else{d.push(r)}}}function a(e,t){console.log("autoxhr-snippet.addListener",e);s.addEventListener(e,function(){if(e==="readystatechange"){r.timing[m[s.readyState]]=g();if(s.readyState===4){i()}}else{r.status=t===undefined?s.status:t;i()}},false)}if(n===true){a("readystatechange")}else{r.synchronous=true}a("load");a("timeout",-1001);a("error",-998);a("abort",-999);try{u.apply(s,arguments);var o=s.send;s.send=function(){r.timing.requestStart=g();console.log("autoxhr-snippet.arguments",arguments);o.apply(s,arguments)}}catch(e){r.status=-997;i()}};return s}})(window);