(function(f){if(!f.XMLHttpRequest||!(new f.XMLHttpRequest).addEventListener){return}var c=document.createElement("A"),t=f.XMLHttpRequest,p=[],d,m=["uninitialized","open","responseStart","domInteractive","responseEnd"];f.BOOMR=f.BOOMR||{};BOOMR.xhr={stop:function(e){d=e;f.XMLHttpRequest=t;delete BOOMR.xhr;setTimeout(function(){p=[]},10);return p}};var g=function(){try{if("performance"in f&&f.performance.timing){return function(){return Math.round(f.performance.now()+performance.timing.navigationStart)}}}catch(e){}return Date.now||function(){return(new Date).getTime()}}();f.XMLHttpRequest=function(){var s=new t,u=s.open;s.open=function(e,t,n){c.href=t;var r={timing:{},url:c.href,method:e};function i(){if(!r.timing.loadEventEnd){r.timing.loadEventEnd=g();if("performance"in f&&f.performance&&typeof f.performance.getEntriesByName==="function"){var e=f.performance.getEntriesByName(r.url);var t=e&&e.length&&e[e.length-1];if(t){var n=f.performance.timing.navigationStart;if(t.responseEnd!==0){r.timing.responseEnd=Math.round(n+t.responseEnd)}if(t.responseStart!==0){r.timing.responseStart=Math.round(n+t.responseStart)}if(t.startTime!==0){r.timing.requestStart=Math.round(n+t.startTime)}}}if(d){d(r)}else{p.push(r)}}}function a(e,t){s.addEventListener(e,function(){if(e==="readystatechange"){r.timing[m[s.readyState]]=g();if(s.readyState===4){i()}}else{r.status=t===undefined?s.status:t;i()}},false)}if(n===true){a("readystatechange")}else{r.synchronous=true}a("load");a("timeout",-1001);a("error",-998);a("abort",-999);try{u.apply(s,arguments);var o=s.send;s.send=function(){r.timing.requestStart=g();o.apply(s,arguments)}}catch(e){r.status=-997;i()}};return s}})(window);