!function(){BOOMR=window.BOOMR||{};BOOMR.plugins=BOOMR.plugins||{};if(!BOOMR.plugins.IPv6){var i={complete:!1,ipv6_url:"",host_url:"",timeout:1200,timers:{ipv6:{start:null,end:null},host:{start:null,end:null}},start:function(){this.load_img("ipv6","host")},load_img:function(){var t,i,e="?t="+BOOMR.utils.generateId(10),n=0,r=this,s=Array.prototype.shift.call(arguments),l=arguments;if(!s||!this.timers.hasOwnProperty(s)){this.done();return!1}if(!this[s+"_url"])return this.load_img.apply(this,l);(t=new Image).onload=function(){r.timers[s].end=(new Date).getTime();clearTimeout(n);t.onload=t.onerror=null;t=null;r.load_img.apply(r,l);r=l=null};i=function(){r.timers[s].supported=!1;clearTimeout(n);t.onload=t.onerror=null;t=null;r.done();r=l=null};t.onerror=i;n=setTimeout(i,this.timeout);this.timers[s].start=(new Date).getTime();t.src=this[s+"_url"]+e;return!0},done:function(){if(!this.complete){BOOMR.removeVar("ipv6_latency","ipv6_lookup");null!==this.timers.ipv6.end?BOOMR.addVar("ipv6_latency",this.timers.ipv6.end-this.timers.ipv6.start):BOOMR.addVar("ipv6_latency","NA");null!==this.timers.host.end?BOOMR.addVar("ipv6_lookup",this.timers.host.end-this.timers.host.start):BOOMR.addVar("ipv6_lookup","NA");this.complete=!0;BOOMR.sendBeacon()}},skip:function(){if(!this.complete){this.complete=!0;BOOMR.sendBeacon()}return this}};BOOMR.plugins.IPv6={init:function(t){BOOMR.utils.pluginConfig(i,t,"IPv6",["ipv6_url","host_url","timeout"]);if(t&&t.wait)return this;if(!i.ipv6_url){BOOMR.warn("IPv6.ipv6_url is not set.  Cannot run IPv6 test.","ipv6");i.complete=!0;return this}i.host_url||BOOMR.warn("IPv6.host_url is not set.  Will skip hostname test.","ipv6");if("https:"===BOOMR.window.location.protocol){i.complete=!0;return this}i.ipv6_url=i.ipv6_url.replace(/^https:/,"http:");i.host_url=i.host_url.replace(/^https:/,"http:");BOOMR.subscribe("page_ready",i.start,null,i);BOOMR.subscribe("before_unload",i.skip,null,i);return this},is_complete:function(){return i.complete}}}}();
//# sourceMappingURL=ipv6.min.js.map