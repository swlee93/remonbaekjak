!function(){BOOMR=window.BOOMR||{};BOOMR.plugins=BOOMR.plugins||{};if(!BOOMR.plugins.Early){var i={initialized:!1,autorun:!0,earlyBeaconSent:!1,singlePageApp:!1,onConfigFired:!1,onSpaInit:function(){this.earlyBeaconSent=!1},clearMetrics:function(){BOOMR.removeVar("early")},sendEarlyBeacon:function(n,e){var i=0,r=BOOMR.getPerformance(),a=BOOMR.window&&BOOMR.window.document;if(a){"onconfig"===e&&(this.onConfigFired=!0);r&&r.navigation&&(i=r.navigation.type);if(this.earlyBeaconSent||"prerender"===BOOMR.visibilityState()||1===i||2===i||!this.singlePageApp&&(!this.autorun||!this.onConfigFired&&"prerender_to_visible"===e||"loading"===a.readyState||BOOMR.hasBrowserOnloadFired())||this.singlePageApp&&!BOOMR.utils.inArray(e,BOOMR.constants.BEACON_TYPE_SPAS))t("Not sending early beacon");else{this.earlyBeaconSent=!0;BOOMR.addVar("early","1");if(n&&BOOMR.utils.inArray(n.initiator,BOOMR.constants.BEACON_TYPE_SPAS)){BOOMR.addVar("http.initiator",n.initiator);BOOMR.addVar("rt.start","manual")}BOOMR.fireEvent("before_early_beacon",n);t("Sending early beacon");BOOMR.sendBeacon()}}}};BOOMR.plugins.Early={init:function(n){if(n.primary||i.initialized)return this;void 0!==n.autorun&&(i.autorun=n.autorun);i.singlePageApp=BOOMR.plugins.SPA&&BOOMR.plugins.SPA.isSinglePageApp(n);BOOMR.registerEvent("before_early_beacon");BOOMR.subscribe("config",i.sendEarlyBeacon,"onconfig",i,!0);BOOMR.subscribe("dom_loaded",i.sendEarlyBeacon,"dom_loaded",i,!0);BOOMR.subscribe("spa_init",i.onSpaInit,null,i);BOOMR.subscribe("prerender_to_visible",i.sendEarlyBeacon,"prerender_to_visible",i,!0);BOOMR.subscribe("beacon",i.clearMetrics,null,i);BOOMR.subscribe("before_beacon",function(n){void 0!==n["rt.quit"]&&i.clearMetrics()},null,i);i.initialized=!0;return this},is_complete:function(){return!0},is_supported:function(){return i.initialized},sendEarlyBeacon:function(n,e){i.sendEarlyBeacon(n,e)}}}function t(n){BOOMR.debug(n,"Early")}}();
//# sourceMappingURL=early.min.js.map