!function(){BOOMR=window.BOOMR||{};BOOMR.plugins=BOOMR.plugins||{};if(!BOOMR.plugins.NavigationTiming){var _={complete:!1,fullySent:!1,sendBeacon:function(){this.complete=!0;BOOMR.sendBeacon()},xhr_done:function(t){var n;if(t&&"spa_hard"===t.initiator)_.done(t);else if(t&&"spa"===t.initiator)_.sendBeacon();else{BOOMR.window;var e,i={};if(t){t.data&&(t=t.data);if((n=BOOMR.getPerformance())&&t.restiming){i={nt_red_st:t.restiming.redirectStart,nt_red_end:t.restiming.redirectEnd,nt_fet_st:t.restiming.fetchStart,nt_dns_st:t.restiming.domainLookupStart,nt_dns_end:t.restiming.domainLookupEnd,nt_con_st:t.restiming.connectStart,nt_con_end:t.restiming.connectEnd,nt_req_st:t.restiming.requestStart,nt_res_st:t.restiming.responseStart,nt_res_end:t.restiming.responseEnd};t.restiming.secureConnectionStart&&(i.nt_ssl_st=t.restiming.secureConnectionStart);for(e in i)if(i.hasOwnProperty(e)&&i[e]){i[e]+=n.timing.navigationStart;i[e]=Math.floor(i[e])}}if(t.timing){t=t.timing;i.nt_req_st||(i.nt_req_st=t.requestStart);i.nt_res_st||(i.nt_res_st=t.responseStart);i.nt_res_end||(i.nt_res_end=t.responseEnd);i.nt_domint=t.domInteractive;i.nt_domcomp=t.domComplete;i.nt_load_st=t.loadEventEnd;i.nt_load_end=t.loadEventEnd}for(e in i)i.hasOwnProperty(e)&&!i[e]&&delete i[e];BOOMR.addVar(i,void 0,!0);_.sendBeacon()}}},done:function(){var t,n,e,i,o,r=BOOMR.window,a={},s=0,d=!1;if(this.complete)return this;if(t=BOOMR.getPerformance()){if("function"==typeof t.getEntriesByType)if((e=t.getEntriesByType("navigation"))&&e.length){BOOMR.info("This user agent supports NavigationTiming2","nt");e=e[0];s=t.timing?t.timing.navigationStart:0}else e=void 0;if(!e&&t.timing){BOOMR.info("This user agent supports NavigationTiming","nt");e=t.timing}if(e){!(a={nt_nav_st:t.timing?t.timing.navigationStart:0,nt_red_st:c(s,e.redirectStart),nt_red_end:c(s,e.redirectEnd),nt_fet_st:c(s,e.fetchStart),nt_dns_st:c(s,e.domainLookupStart),nt_dns_end:c(s,e.domainLookupEnd),nt_con_st:c(s,e.connectStart),nt_con_end:c(s,e.connectEnd),nt_req_st:c(s,e.requestStart),nt_res_st:c(s,e.responseStart),nt_res_end:c(s,e.responseEnd),nt_domloading:c(s,e.domLoading),nt_domint:c(s,e.domInteractive),nt_domcontloaded_st:c(s,e.domContentLoadedEventStart),nt_domcontloaded_end:c(s,e.domContentLoadedEventEnd),nt_domcomp:c(s,e.domComplete),nt_load_st:c(s,e.loadEventStart),nt_load_end:c(s,e.loadEventEnd),nt_unload_st:c(s,e.unloadEventStart),nt_unload_end:c(s,e.unloadEventEnd)}).nt_domloading&&t&&t.timing&&t.timing.domLoading&&(a.nt_domloading=t.timing.domLoading);e.secureConnectionStart&&(a.nt_ssl_st=c(s,e.secureConnectionStart));t.timing&&t.timing.msFirstPaint&&(a.nt_first_paint=t.timing.msFirstPaint);e.workerStart&&(a.nt_worker_start=c(s,e.workerStart));if(e.decodedBodySize||e.transferSize){a.nt_enc_size=e.encodedBodySize;a.nt_dec_size=e.decodedBodySize;a.nt_trn_size=e.transferSize}e.nextHopProtocol&&(a.nt_protocol=e.nextHopProtocol)}if(!a.nt_first_paint&&BOOMR.plugins.PaintTiming){d=BOOMR.plugins.PaintTiming.is_supported();(i=BOOMR.plugins.PaintTiming.getTimingFor("first-paint"))&&(a.nt_first_paint=c(s,i))}if((!a.nt_protocol||!a.nt_first_paint)&&(!e||""!==e.nextHopProtocol)&&!d&&r.chrome&&"function"==typeof r.chrome.loadTimes&&(n=r.chrome.loadTimes())){a.nt_spdy=n.wasFetchedViaSpdy?1:0;a.nt_cinf=n.connectionInfo;"number"==typeof n.firstPaintTime&&0!==n.firstPaintTime&&(a.nt_first_paint=Math.round(1e3*n.firstPaintTime))}if(t.navigation){t=t.navigation;a.nt_red_cnt=t.redirectCount;a.nt_nav_type=t.type}for(o in a)a.hasOwnProperty(o)&&void 0===a[o]&&delete a[o];BOOMR.addVar(a,void 0,!0);e&&(e.requestStart&&e.navigationStart&&e.requestStart<e.navigationStart||e.responseStart&&e.navigationStart&&e.responseStart<e.navigationStart||e.responseStart&&e.fetchStart&&e.responseStart<e.fetchStart||e.navigationStart&&e.fetchStart<e.navigationStart||e.responseEnd&&e.responseEnd>BOOMR.now()+864e5)&&BOOMR.addVar("nt_bad",1,!0);0<a.nt_load_end&&(this.fullySent=!0)}_.sendBeacon()},clear:function(t){this.complete=!(t&&t.early)&&this.fullySent},prerenderToVisible:function(){this.complete=!1;this.done()},onBeforeEarlyBeacon:function(t){t&&void 0!==t.initiator&&"spa_hard"!==t.initiator||this.done()}};BOOMR.plugins.NavigationTiming={init:function(){if(!_.initialized){BOOMR.subscribe("page_ready",_.done,null,_);BOOMR.subscribe("prerender_to_visible",_.prerenderToVisible,null,_);BOOMR.subscribe("before_early_beacon",_.onBeforeEarlyBeacon,null,_);BOOMR.subscribe("xhr_load",_.xhr_done,null,_);BOOMR.subscribe("before_unload",_.done,null,_);BOOMR.subscribe("beacon",_.clear,null,_);_.initialized=!0}return this},is_complete:function(){return!0}}}function c(t,n){if("number"==typeof n&&0!==n)return Math.floor((t||0)+n)}}();
//# sourceMappingURL=navtiming.min.js.map