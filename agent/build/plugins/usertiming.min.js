!function(){BOOMR=window.BOOMR||{};BOOMR.plugins=BOOMR.plugins||{};if(!BOOMR.plugins.UserTiming){var u={complete:!1,initialized:!1,supported:!1,options:{from:0,window:BOOMR.window},getUserTiming:function(){var e=this.findUserTimingForFrame(u.options.window);u.options.from&&(e=e.filter(function(e){return e.startTime+e.duration>=u.options.from}));var i=window.UserTimingCompression||BOOMR.window.UserTimingCompression;if(void 0===i){if(0===e.length)return null;for(var r={},n=0,t=e.length;n<t;n++){var s=e[n];r[s.entryType]=r[s.entryType]||{};"mark"===s.entryType?r[s.entryType][s.name]=s.startTime:"measure"===s.entryType&&(r[s.entryType][s.name]=s.duration)}return JSON.stringify(r)}var o=i.compressUserTiming(e);return i.compressForUri(o)},addEntriesToBeacon:function(e){var i=BOOMR.hrNow();if(!(this.complete||e&&void 0!==e.early)){(e=this.getUserTiming())&&BOOMR.addVar("usertiming",e,!0);this.options.from=i;this.complete=!0}},findUserTimingForFrame:function(e){var i;if(!e)return[];try{e.location&&e.location.href;if(!("performance"in e&&e.performance&&e.performance.getEntriesByType))return i;i=(i=e.performance.getEntriesByType("mark")).concat(e.performance.getEntriesByType("measure"))}catch(e){return i}return i},clearMetrics:function(e){this.complete=!1},subscribe:function(){BOOMR.subscribe("before_beacon",this.addEntriesToBeacon,null,this);BOOMR.subscribe("beacon",this.clearMetrics,null,this)},pageReady:function(){this.checkSupport()&&this.subscribe()},checkSupport:function(){if(this.supported)return!0;var e=BOOMR.getPerformance();if(e&&"function"==typeof e.getEntriesByType){var i=e.getEntriesByType("mark"),e=e.getEntriesByType("measure");if(BOOMR.utils.isArray(i)&&BOOMR.utils.isArray(e)){BOOMR.info("Client supports UserTiming API","usertiming");return this.supported=!0}}return!1}};BOOMR.plugins.UserTiming={init:function(e){if(u.initialized)return this;u.checkSupport()?u.subscribe():BOOMR.subscribe("page_ready",u.pageReady,null,u);u.initialized=!0;return this},is_complete:function(){return!0},is_supported:function(){return u.initialized&&u.supported}}}}();
//# sourceMappingURL=usertiming.min.js.map